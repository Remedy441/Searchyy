"use strict";(()=>{var s=new Map,d=(t,n)=>{s.set(t.url,{content:n,meta:t})},h=t=>{let n=[];for(let c of Array.from(s.entries())){let r=c[0],a=c[1],e=a.content.indexOf(t);e!==-1&&n.push({url:r,meta:a.meta,matchString:a.content.substring(e-100,e+100)})}return n};function b(t){chrome.scripting.executeScript({target:{tabId:t.id||0},files:["dist/content/index.js"]}).then(()=>{console.log("INJECTED THE FOREGROUND SCRIPT.")}).catch(n=>console.log(n))}try{chrome.tabs.query({},t=>{t.forEach(b)}),chrome.runtime.onMessage.addListener(async function(t,n,c){var a;switch(t.type){case"index":{let e={url:t.url,tabId:((a=n.tab)==null?void 0:a.id)||0};d(e,t.content),c("indexed")}break;case"search":{let e=t.key;c(h(e))}break;case"openTab":{let e=t.tabId,i=t.searchkey;var r={active:!0};try{let o=await chrome.tabs.get(e);await chrome.tabs.update(e,r),chrome.tabs.sendMessage(e,{type:"search",key:i}),await chrome.windows.update(o.windowId,{focused:!0})}catch(o){o instanceof Error}}}})}catch(t){console.log(t)}})();
//# sourceMappingURL=index.js.map
